{"version":3,"sources":["componentes/Socket.js","componentes/Chat.js","componentes/Popup.js","componentes/Map.js","componentes/Flights.js","App.js","reportWebVitals.js","index.js"],"names":["socket","io","path","on","console","log","connected","Chat","name","useState","message","setMessage","messages","setMessages","useEffect","divRef","useRef","current","scrollIntoView","behavior","className","map","e","i","Date","date","toLocaleTimeString","ref","onSubmit","preventDefault","emit","htmlFor","value","onChange","target","Popup","props","trigger","onClick","setTrigger","children","MapView","positions","flights","planeIcon","L","icon","iconUrl","iconSize","redOptions","color","MapContainer","center","zoom","scrollWheelZoom","TileLayer","attribution","url","p","Marker","position","code","f","origin","destination","Polyline","pathOptions","Flights","flightsList","setFlights","planesPositions","setPlanesPositions","buttonPopup","setButtonPoup","currentPlane","setCurrentPlane","mapData","flightsListUpdated","plane","planes2","similar_plane","find","x","indexOf","off","Map","airline","seats","passengers","age","App","setName","registrado","setRegistrado","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"oOAEIA,E,MAASC,GAAG,wDAAyD,CACrEC,KAAM,cAGVF,EAAOG,GAAG,WAAW,WACnBC,QAAQC,IAAI,mBAAoBL,EAAOM,cAK1BN,Q,eCiDAO,EAvDF,SAAC,GAAc,IAAZC,EAAW,EAAXA,KAEZ,EAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KAEAC,qBAAU,WACNd,EAAOG,GAAG,QAAQ,SAAAO,GACdG,EAAY,GAAD,mBAAKD,GAAL,CAAeF,UAK/B,CAACE,IAEJ,IAAMG,EAASC,iBAAO,MACtBF,qBAAU,WACNC,EAAOE,QAAQC,eAAe,CAACC,SAAU,cAS7C,OACI,sBAAKC,UAAU,UAAf,UACI,qBAAKA,UAAU,QAAf,SACI,wCAGJ,sBAAKA,UAAU,OAAf,UACKR,EAASS,KAAI,SAACC,EAAEC,GAAH,OAAQ,gCAClB,gCAAMD,EAAEd,KAAR,OACA,8BAAO,IAAIgB,KAAKF,EAAEG,MAAOC,uBACzB,gCAAMJ,EAAEZ,QAAR,SAH4Ba,MAMhC,qBAAKI,IAAKZ,OAId,uBAAMa,SAvBC,SAACN,GACZA,EAAEO,iBACF7B,EAAO8B,KAAK,OAAQ,CAACtB,OAAME,YAC3BC,EAAW,KAoBP,UACI,uBAAOoB,QAAQ,GAAf,eACA,uBAAQC,MAAQtB,EAASuB,SAAY,SAACX,GAAD,OAAOX,EAAWW,EAAEY,OAAOF,UAEhE,mDCrCDG,MAZf,SAAgBC,GACZ,OAAOA,EAAMC,QACT,qBAAKjB,UAAU,QAAf,SACI,sBAAKA,UAAU,cAAf,UACI,wBAAQA,UAAU,YAAYkB,QAAS,kBAAIF,EAAMG,YAAW,IAA5D,oBACCH,EAAMI,cAIf,I,wDC4DOC,EAlEC,SAAC,GAAyB,IAAxBC,EAAuB,EAAvBA,UAAWC,EAAY,EAAZA,QAEnBC,EAAY,IAAIC,IAAEC,KAAK,CACzBC,QAAS,4DACTC,SAAU,CAAC,GAAG,MAGZC,EAAa,CAAEC,MAAO,OAmB5B,OAAQ,eAACC,EAAA,EAAD,CAAc/B,UAAU,oBAAoBgC,OAAQ,EAAE,SAAU,SAAUC,KAAM,EAAGC,iBAAiB,EAApG,UACR,cAACC,EAAA,EAAD,CACEC,YAAY,yEACZC,IAAI,uDAELf,EAAUrB,KAAI,SAACqC,GAAD,OACX,cAACC,EAAA,EAAD,CAAQC,SAAUF,EAAEE,SAAUd,KAAMF,EAApC,SACI,eAAC,IAAD,oBACWc,EAAEG,KADb,YAPA,IAgBRlB,EAAQtB,KAAI,SAACyC,GAAD,OACR,qCACI,cAACH,EAAA,EAAD,CAAQC,SAAUE,EAAEC,OAApB,SACI,eAAC,IAAD,qBACYD,EAAEC,OADd,SAMJ,cAACJ,EAAA,EAAD,CAAQC,SAAUE,EAAEE,YAApB,SACI,eAAC,IAAD,sBACaF,EAAEE,iBAKnB,cAACC,EAAA,EAAD,CAAUC,YAAajB,EAAYP,UAAW,CAACoB,EAAEC,OAAOD,EAAEE,qBAhC1D,QCmFGG,EA3GC,WAEZ,MAAkC1D,mBAAS,IAA3C,mBAAO2D,EAAP,KAAoBC,EAApB,KACA,EAA8C5D,mBAAS,IAAvD,mBAAO6D,EAAP,KAAwBC,EAAxB,KAGA,EAAqC9D,oBAAS,GAA9C,mBAAO+D,EAAP,KAAoBC,EAApB,KACA,EAAwChE,mBAAS,IAAjD,mBAAOiE,EAAP,KAAqBC,EAArB,KAEIC,EAAU,CAAC,GAAG,IAmClB,OA/BA9D,qBAAU,WAwBF,OAtBAd,EAAO8B,KAAK,WACZ9B,EAAOG,GAAG,WAAW,SAAA0E,GACjBR,EAAWQ,GACXD,EAAQ,GAAGC,KAGf7E,EAAOG,GAAG,YAAY,SAAA2E,GAClB,IAAIC,EAAUT,EACVU,EAAgBD,EAAQE,MAAK,SAAAC,GAAC,OAAIA,EAAErB,OAASiB,EAAMjB,QAEzB,qBAAnBmB,GAEPD,EAAQA,EAAQI,QAAQH,IAAkBF,EAC1CP,EAAmBQ,GACnBH,EAAQ,GAAKG,IAGbR,EAAmB,GAAD,mBAAKD,GAAL,CAAsBQ,KACxCF,EAAQ,GAAR,sBAAiBN,GAAjB,CAAkCQ,QAInC,WAAO9E,EAAOoF,SAC1B,CAAChB,EAAaE,IAEjBlE,QAAQC,IAAI,gBACZD,QAAQC,IAAI+D,GAIR,sBAAKhD,UAAU,UAAf,UACI,qBAAKA,UAAU,QAAf,SACI,0CAGJ,qBAAKA,UAAU,gBAAf,SAIA,cAACiE,EAAD,CACI3C,UAAY4B,EACZ3B,QAAWyB,MAQf,sBAAKhD,UAAU,cAAf,UAEI,qBAAKA,UAAU,QAAf,SACI,6DAGJ,qBAAKA,UAAU,iBAAf,SAEKgD,EAAY/C,KAAI,SAACC,EAAEC,GAAH,OACjB,sBAAaH,UAAU,OAAvB,UACI,8BAAME,EAAEuC,OACR,8BAAMvC,EAAEgE,UACR,8BAAMhE,EAAEyC,SACR,8BAAMzC,EAAE0C,cACR,8BAAM1C,EAAEwD,QACR,8BAAMxD,EAAEiE,QACR,wBAAQjD,QAAS,WAAMmC,GAAc,GAAOE,EAAgBrD,EAAEkE,aAA9D,6BAPMjE,WAiBlB,eAAC,EAAD,CAAOc,QAASmC,EAAajC,WAAYkC,EAAzC,UACA,2CACA,qBAAKrD,UAAU,iBAAf,SACCsD,EAAarD,KAAI,SAACC,EAAEC,GAAH,OACd,qBAAaH,UAAU,YAAvB,SACI,gCAAME,EAAEd,KAAR,MAAiBc,EAAEmE,QADblE,eCjDXmE,MA5Cf,WAEE,MAAyBjF,mBAAS,IAAlC,mBAAOD,EAAP,KAAamF,EAAb,KAEA,EAAoClF,oBAAS,GAA7C,mBAAOmF,EAAP,KAAmBC,EAAnB,KAWA,OADA7F,EAAO8B,KAAK,YAAa,aAEvB,+BACE,sBAAKV,UAAU,MAAf,UAEE,qBAAKA,UAAU,UAAf,SACE,cAAC,EAAD,MAGF,sBAAKA,UAAU,WAAf,WAEKwE,GACD,uBAAMhE,SApBE,SAACN,GACjBA,EAAEO,iBACU,KAATrB,GACDqF,GAAc,IAiBR,UACE,uBAAO9D,QAAQ,KACf,2CACA,uBAAOC,MAASxB,EAAMyB,SAAY,SAAAX,GAAC,OAAIqE,EAAQrE,EAAEY,OAAOF,UACxD,gDAIF4D,GAEA,cAAC,EAAD,CAAMpF,KAAOA,aCjCVsF,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.f5306e2a.chunk.js","sourcesContent":["import io from 'socket.io-client';\n\nlet socket = io(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", {\n    path: \"/flights/\",\n  });\n\nsocket.on('connect', function() {\n  console.log('check connection', socket.connected);\n});\n\n\n\nexport default socket;","import React, {useState, useEffect , useRef} from 'react';\nimport socket from './Socket';\nimport '../App.css';\n\n\n\nconst Chat = ({ name }) => {\n\n    const [message, setMessage] = useState(\"\");\n    const [messages, setMessages] = useState([]);\n\n    useEffect(() => {\n        socket.on('CHAT', message => {\n            setMessages([...messages, message]);\n        })\n    \n\n        //return () => {socket.off()}\n    }, [messages]);\n\n    const divRef = useRef(null);\n    useEffect(() =>{\n        divRef.current.scrollIntoView({behavior: 'smooth'});\n    });\n\n    const submit = (e) => {\n        e.preventDefault();\n        socket.emit('CHAT', {name, message});\n        setMessage(\"\");\n    };\n\n    return (\n        <div className=\"chatBox\">\n            <div className=\"title\">\n                <h1>Chat</h1>\n            </div>\n\n            <div className=\"chat\">\n                {messages.map((e,i)=> <div key={i}> \n                    <div>{e.name} </div> \n                    <div>{(new Date(e.date)).toLocaleTimeString()}</div> \n                    <div>{e.message} </div>\n                </div>\n                )}\n                <div ref={divRef}></div>\n            </div>\n\n\n            <form onSubmit={submit}>\n                <label htmlFor=\"\"> </label>\n                <input  value= {message} onChange = {(e) => setMessage(e.target.value)}/>\n\n                <button>Enviar</button>\n            </form>\n            \n        </div>\n\n\n    );\n};\n\nexport default Chat","import React from 'react';\nimport '../App.css';\n\nfunction Popup (props) {\n    return(props.trigger) ? (\n        <div className=\"popup\">\n            <div className=\"popup-inner\">\n                <button className=\"close-btn\" onClick={()=>props.setTrigger(false)}>Cerrar</button>\n                {props.children}\n            </div>\n\n        </div>\n    ) : \"\";\n};\n\nexport default Popup","import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from 'react-leaflet';\nimport L from 'leaflet';\nimport '../App.css';\n\n\nconst MapView = ({positions, flights})=> {\n\n    const planeIcon = new L.icon({\n        iconUrl: \"https://image.flaticon.com/icons/png/512/2979/2979504.png\",//require(\"../public/plane.png\")\n        iconSize: [40,40],\n    });\n\n    const redOptions = { color: 'red' }\n\n    //console.log(\"DESDE MAP\")\n    //console.log(positions)\n    //console.log(flights)\n    \n    //const [positionList, setPositionList ]= useState(positions)\n    // const [sePuede, setSePuede] = useState(false);\n\n    // useEffect(() => {\n    //     var vuelos = mapData[0] \n    //     if (!vuelos.lenght){\n    //         setSePuede(false) \n    //     }else {\n    //         setSePuede(true) \n    //     };\n    // }, [sePuede]);\n\n\n    return  <MapContainer className=\"leaflet-container\" center={[-33.4489, -70.6693]} zoom={5} scrollWheelZoom={true}>\n    <TileLayer\n      attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n      url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    />\n    {positions.map((p)=>\n        <Marker position={p.position} icon={planeIcon}>\n            <Popup>\n                Vuelo {p.code}.\n            </Popup>\n        </Marker>\n    )};\n    \n    {\n    \n    \n    flights.map((f) =>\n        <>\n            <Marker position={f.origin}>\n                <Popup>\n                    Origen {f.origin}.\n                </Popup>\n            </Marker>\n            \n\n            <Marker position={f.destination}>\n                <Popup>\n                    Destino {f.destination}\n                </Popup>\n            </Marker>\n\n\n            <Polyline pathOptions={redOptions} positions={[f.origin,f.destination]} />\n        </>\n    )\n    };\n    \n  </MapContainer>\n};\n\nexport default MapView\n\n// [33.4489, 70.6693]","import React, {useState, useEffect} from 'react';\nimport socket from './Socket';\nimport '../App.css';\nimport Popup from './Popup';\nimport MapView from './Map';\n\n\n\nconst Flights = () => {\n\n    const [flightsList, setFlights] = useState([]);\n    const [planesPositions, setPlanesPositions] = useState([]);\n    //const [mapData, setMapData] = useState([]);\n\n    const [buttonPopup, setButtonPoup] = useState(false);\n    const [currentPlane, setCurrentPlane] = useState([]);\n\n    var mapData = [[],[]]\n\n \n    // FLIGHTS LIST\n    useEffect(() => {\n\n            socket.emit('FLIGHTS');\n            socket.on('FLIGHTS', flightsListUpdated => {\n                setFlights(flightsListUpdated);\n                mapData[0]=flightsListUpdated\n            });\n            \n            socket.on('POSITION', plane => {\n                var planes2 = planesPositions\n                var similar_plane = planes2.find(x => x.code === plane.code)\n    \n                if (typeof(similar_plane) !== \"undefined\"){\n                    \n                    planes2[planes2.indexOf(similar_plane)] = plane;\n                    setPlanesPositions(planes2);\n                    mapData[1] = planes2\n    \n                }else {\n                    setPlanesPositions([...planesPositions, plane]);\n                    mapData[1] = [...planesPositions, plane]\n                    }          \n            });\n\n            return () => {socket.off()}\n    }, [flightsList, planesPositions]);\n\n    console.log(\"DESDE FLIGHT\")\n    console.log(flightsList)\n\n\n    return (\n        <div className=\"flights\">\n            <div className=\"title\">\n                <h1>Vuelos</h1>\n            </div>\n            \n            <div className=\"map-container\">\n\n     \n            \n            <MapView \n                positions ={planesPositions}\n                flights = {flightsList}\n             />\n            \n            \n            </div>\n\n\n\n            <div className=\"flightsList\">\n\n                <div className=\"title\">\n                    <h1>Informacion de los Vuelos</h1>\n                </div>\n\n                <div className=\"card-container\">\n                    \n                    {flightsList.map((e,i)=> \n                    <div key={i} className=\"card\">\n                        <div>{e.code}</div>\n                        <div>{e.airline}</div>\n                        <div>{e.origin}</div> \n                        <div>{e.destination}</div> \n                        <div>{e.plane}</div>\n                        <div>{e.seats}</div>\n                        <button onClick={()=> {setButtonPoup(true); setCurrentPlane(e.passengers)}}>Ver pasajeros</button>\n\n                    </div>\n                    \n                    )}\n            \n                </div>\n            </div>\n\n\n            <Popup trigger={buttonPopup} setTrigger={setButtonPoup}>\n            <h3>Pasajeros</h3>\n            <div className=\"passenger-list\">\n            {currentPlane.map((e,i)=>\n                <div key={i} className=\"passenger\">\n                    <div>{e.name}   {e.age}</div>\n                </div>\n            )}\n            </div>\n            </Popup>\n\n        </div>\n\n\n    );\n};\n\nexport default Flights\n\n\n/*\n       {planesPositions.map((e,i)=> \n                    <div key={i} >\n                        <div>{e.code}</div>\n                        <div>{e.position}</div>\n                    </div>        \n             )}\n*/","import './App.css';\nimport React, { useState }from 'react';\nimport socket from './componentes/Socket';\nimport Chat from './componentes/Chat';\nimport Flights from './componentes/Flights';\n\n\n\n\nfunction App() {\n\n  const [name, setName ] = useState(\"\");\n\n  const [registrado, setRegistrado] = useState(false);\n\n  const registrar = (e) => {\n    e.preventDefault();\n    if(name !== \"\"){\n      setRegistrado(true);\n    }\n  \n  }\n\n  socket.emit('conectado', \"Hola hola\");\n  return (\n    <main>\n      <div className=\"App\">\n      \n        <div className='leftBox'>\n          <Flights />\n        </div>\n\n        <div className='rightBox'>\n          {\n            !registrado &&\n            <form onSubmit={registrar}>\n              <label htmlFor=\"\"></label>\n              <h3>Nickname:</h3>\n              <input value = {name} onChange = {e => setName(e.target.value)}/>\n              <button>Chatear</button>\n            </form>\n          }\n          {\n            registrado &&\n\n            <Chat name ={name}/>\n          }\n        </div>\n      </div>\n    </main>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}