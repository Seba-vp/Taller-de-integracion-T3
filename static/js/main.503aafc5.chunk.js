(this["webpackJsonpflight-app"]=this["webpackJsonpflight-app"]||[]).push([[0],{14:function(e,t,c){},49:function(e,t,c){},82:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),i=c(21),a=c.n(i),r=(c(49),c(2)),j=(c(14),c(23)),o=c.n(j),l=o()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights/"});l.on("connect",(function(){console.log("check connection",l.connected)}));var b=l,d=c(24),h=o()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights/"});h.on("connect",(function(){console.log("check connection chat",h.connected)}));var O=h,u=c(0),x=function(e){var t=e.name,c=Object(n.useState)(""),s=Object(r.a)(c,2),i=s[0],a=s[1],j=Object(n.useState)([]),o=Object(r.a)(j,2),l=o[0],b=o[1];Object(n.useEffect)((function(){return O.on("CHAT",(function(e){b([].concat(Object(d.a)(l),[e]))})),function(){O.off()}}),[l]);var h=Object(n.useRef)(null);Object(n.useEffect)((function(){h.current.scrollIntoView({behavior:"smooth"})}));return Object(u.jsxs)("div",{className:"chatBox",children:[Object(u.jsxs)("div",{className:"title",children:[Object(u.jsx)("h1",{children:"Chat"}),Object(u.jsx)("br",{})]}),Object(u.jsxs)("div",{className:"chat",children:[l.map((function(e,c){return function(e,c){return e.name===t?Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("img",{src:"https://image.flaticon.com/icons/png/512/4695/4695105.png",alt:"Avatar"}),Object(u.jsx)("h3",{children:e.name}),Object(u.jsx)("p",{children:e.message}),Object(u.jsx)("span",{class:"time-right",children:new Date(e.date).toLocaleTimeString()})]},c):Object(u.jsxs)("div",{className:"container darker",children:[Object(u.jsx)("img",{src:"https://image.flaticon.com/icons/png/512/3416/3416530.png",alt:"Avatar",class:"right"}),Object(u.jsx)("h3",{children:e.name}),Object(u.jsx)("p",{children:e.message}),Object(u.jsx)("span",{class:"time-left",children:new Date(e.date).toLocaleTimeString()})]},c)}(e,c)})),Object(u.jsx)("div",{ref:h})]}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O.emit("CHAT",{name:t,message:i}),a("")},children:[Object(u.jsx)("label",{htmlFor:"",children:" "}),Object(u.jsx)("input",{value:i,onChange:function(e){return a(e.target.value)},className:"chatInput"}),Object(u.jsx)("button",{className:"button",children:"Enviar"})]})]})};var m=function(e){return e.trigger?Object(u.jsx)("div",{className:"popup",children:Object(u.jsxs)("div",{className:"popup-inner",children:[Object(u.jsx)("button",{className:"close-btn",onClick:function(){return e.setTrigger(!1)},children:"Cerrar"}),e.children]})}):""},p=c(84),f=c(88),g=c(85),v=c(86),N=c(87),S=c(3),C=c.n(S),T=function(e){var t=e.positions,c=e.flights,n=new C.a.icon({iconUrl:"https://image.flaticon.com/icons/png/512/2979/2979504.png",iconSize:[40,40]}),s={color:"red"};return Object(u.jsxs)(p.a,{className:"leaflet-container",center:[-33.4489,-70.6693],zoom:5,scrollWheelZoom:!0,children:[Object(u.jsx)(f.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map((function(e){return Object(u.jsx)(g.a,{position:e.position,icon:n,children:Object(u.jsxs)(v.a,{children:["Vuelo ",e.code,"."]})})})),";",c.map((function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(g.a,{position:e.origin,children:Object(u.jsxs)(v.a,{children:["Origen ",e.origin,"."]})}),Object(u.jsx)(g.a,{position:e.destination,children:Object(u.jsxs)(v.a,{children:["Destino ",e.destination]})}),Object(u.jsx)(N.a,{pathOptions:s,positions:[e.origin,e.destination]})]})})),";"]})},k=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),c=t[0],s=t[1],i=Object(n.useState)([]),a=Object(r.a)(i,2),j=a[0],o=a[1],l=Object(n.useState)(!1),h=Object(r.a)(l,2),O=h[0],x=h[1],p=Object(n.useState)([]),f=Object(r.a)(p,2),g=f[0],v=f[1];return Object(n.useEffect)((function(){return b.emit("FLIGHTS"),b.on("FLIGHTS",(function(e){s(e)})),b.on("POSITION",(function(e){var t=j,c=t.find((function(t){return t.code===e.code}));"undefined"!==typeof c?(t[t.indexOf(c)]=e,o(t)):o([].concat(Object(d.a)(j),[e]))})),function(){b.off()}}),[c,j]),Object(u.jsxs)("div",{className:"flights",children:[Object(u.jsx)("div",{className:"title",children:Object(u.jsx)("h1",{children:"Vuelos"})}),Object(u.jsx)("div",{className:"map-container",children:Object(u.jsx)(T,{positions:j,flights:c})}),Object(u.jsxs)("div",{className:"flightsList",children:[Object(u.jsx)("div",{className:"title",children:Object(u.jsx)("h1",{children:"Informacion de los Vuelos"})}),Object(u.jsx)("div",{className:"card-container",children:c.map((function(e,t){return Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("div",{children:Object(u.jsxs)("h3",{children:["Codigo: ",e.code]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:["Aerolinea: ",e.airline]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:["Origen: ",e.origin]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:["Destino: ",e.destination]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:["Avi\xf3n: ",e.plane]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:["Asientos: ",e.seats,"        ",Object(u.jsx)("button",{onClick:function(){x(!0),v(e.passengers)},children:"Ver pasajeros"})]})})]},t)}))})]}),Object(u.jsxs)(m,{trigger:O,setTrigger:x,children:[Object(u.jsx)("h3",{children:"Pasajeros"}),Object(u.jsx)("div",{className:"passenger-list",children:g.map((function(e,t){return Object(u.jsx)("div",{className:"passenger",children:Object(u.jsxs)("div",{children:[e.name,"   ",e.age]})},t)}))})]})]})};var w=function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),c=t[0],s=t[1],i=Object(n.useState)(!1),a=Object(r.a)(i,2),j=a[0],o=a[1];return Object(u.jsx)("main",{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("div",{className:"leftBox",children:Object(u.jsx)(k,{})}),Object(u.jsxs)("div",{className:"rightBox",children:[!j&&Object(u.jsx)("div",{className:"login",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==c&&o(!0)},children:[Object(u.jsx)("label",{htmlFor:""}),Object(u.jsx)("h1",{children:"Nickname:"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{value:c,onChange:function(e){return s(e.target.value)},className:"input"}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{className:"inputButton",children:"Chatear"})]})}),j&&Object(u.jsx)(x,{name:c})]})]})})},F=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,89)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),i(e),a(e)}))};a.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root")),F()}},[[82,1,2]]]);
//# sourceMappingURL=main.503aafc5.chunk.js.map