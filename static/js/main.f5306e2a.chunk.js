(this["webpackJsonpflight-app"]=this["webpackJsonpflight-app"]||[]).push([[0],{14:function(e,t,n){},49:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),s=n(22),a=n.n(s),r=(n(49),n(2)),o=(n(14),n(44)),j=n.n(o)()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights/"});j.on("connect",(function(){console.log("check connection",j.connected)}));var l=j,d=n(18),b=n(0),h=function(e){var t=e.name,n=Object(c.useState)(""),i=Object(r.a)(n,2),s=i[0],a=i[1],o=Object(c.useState)([]),j=Object(r.a)(o,2),h=j[0],O=j[1];Object(c.useEffect)((function(){l.on("CHAT",(function(e){O([].concat(Object(d.a)(h),[e]))}))}),[h]);var u=Object(c.useRef)(null);Object(c.useEffect)((function(){u.current.scrollIntoView({behavior:"smooth"})}));return Object(b.jsxs)("div",{className:"chatBox",children:[Object(b.jsx)("div",{className:"title",children:Object(b.jsx)("h1",{children:"Chat"})}),Object(b.jsxs)("div",{className:"chat",children:[h.map((function(e,t){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[e.name," "]}),Object(b.jsx)("div",{children:new Date(e.date).toLocaleTimeString()}),Object(b.jsxs)("div",{children:[e.message," "]})]},t)})),Object(b.jsx)("div",{ref:u})]}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l.emit("CHAT",{name:t,message:s}),a("")},children:[Object(b.jsx)("label",{htmlFor:"",children:" "}),Object(b.jsx)("input",{value:s,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)("button",{children:"Enviar"})]})]})};var O=function(e){return e.trigger?Object(b.jsx)("div",{className:"popup",children:Object(b.jsxs)("div",{className:"popup-inner",children:[Object(b.jsx)("button",{className:"close-btn",onClick:function(){return e.setTrigger(!1)},children:"Cerrar"}),e.children]})}):""},u=n(84),x=n(88),f=n(85),m=n(86),p=n(87),g=n(3),v=n.n(g),N=function(e){var t=e.positions,n=e.flights,c=new v.a.icon({iconUrl:"https://image.flaticon.com/icons/png/512/2979/2979504.png",iconSize:[40,40]}),i={color:"red"};return Object(b.jsxs)(u.a,{className:"leaflet-container",center:[-33.4489,-70.6693],zoom:5,scrollWheelZoom:!0,children:[Object(b.jsx)(x.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map((function(e){return Object(b.jsx)(f.a,{position:e.position,icon:c,children:Object(b.jsxs)(m.a,{children:["Vuelo ",e.code,"."]})})})),";",n.map((function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f.a,{position:e.origin,children:Object(b.jsxs)(m.a,{children:["Origen ",e.origin,"."]})}),Object(b.jsx)(f.a,{position:e.destination,children:Object(b.jsxs)(m.a,{children:["Destino ",e.destination]})}),Object(b.jsx)(p.a,{pathOptions:i,positions:[e.origin,e.destination]})]})})),";"]})},S=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)([]),a=Object(r.a)(s,2),o=a[0],j=a[1],h=Object(c.useState)(!1),u=Object(r.a)(h,2),x=u[0],f=u[1],m=Object(c.useState)([]),p=Object(r.a)(m,2),g=p[0],v=p[1],S=[[],[]];return Object(c.useEffect)((function(){return l.emit("FLIGHTS"),l.on("FLIGHTS",(function(e){i(e),S[0]=e})),l.on("POSITION",(function(e){var t=o,n=t.find((function(t){return t.code===e.code}));"undefined"!==typeof n?(t[t.indexOf(n)]=e,j(t),S[1]=t):(j([].concat(Object(d.a)(o),[e])),S[1]=[].concat(Object(d.a)(o),[e]))})),function(){l.off()}}),[n,o]),console.log("DESDE FLIGHT"),console.log(n),Object(b.jsxs)("div",{className:"flights",children:[Object(b.jsx)("div",{className:"title",children:Object(b.jsx)("h1",{children:"Vuelos"})}),Object(b.jsx)("div",{className:"map-container",children:Object(b.jsx)(N,{positions:o,flights:n})}),Object(b.jsxs)("div",{className:"flightsList",children:[Object(b.jsx)("div",{className:"title",children:Object(b.jsx)("h1",{children:"Informacion de los Vuelos"})}),Object(b.jsx)("div",{className:"card-container",children:n.map((function(e,t){return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{children:e.code}),Object(b.jsx)("div",{children:e.airline}),Object(b.jsx)("div",{children:e.origin}),Object(b.jsx)("div",{children:e.destination}),Object(b.jsx)("div",{children:e.plane}),Object(b.jsx)("div",{children:e.seats}),Object(b.jsx)("button",{onClick:function(){f(!0),v(e.passengers)},children:"Ver pasajeros"})]},t)}))})]}),Object(b.jsxs)(O,{trigger:x,setTrigger:f,children:[Object(b.jsx)("h3",{children:"Pasajeros"}),Object(b.jsx)("div",{className:"passenger-list",children:g.map((function(e,t){return Object(b.jsx)("div",{className:"passenger",children:Object(b.jsxs)("div",{children:[e.name,"   ",e.age]})},t)}))})]})]})};var C=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(!1),a=Object(r.a)(s,2),o=a[0],j=a[1];return l.emit("conectado","Hola hola"),Object(b.jsx)("main",{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("div",{className:"leftBox",children:Object(b.jsx)(S,{})}),Object(b.jsxs)("div",{className:"rightBox",children:[!o&&Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==n&&j(!0)},children:[Object(b.jsx)("label",{htmlFor:""}),Object(b.jsx)("h3",{children:"Nickname:"}),Object(b.jsx)("input",{value:n,onChange:function(e){return i(e.target.value)}}),Object(b.jsx)("button",{children:"Chatear"})]}),o&&Object(b.jsx)(h,{name:n})]})]})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),s(e),a(e)}))};a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(C,{})}),document.getElementById("root")),T()}},[[82,1,2]]]);
//# sourceMappingURL=main.f5306e2a.chunk.js.map